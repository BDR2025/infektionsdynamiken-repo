<!doctype html>
<!--
  ============================================================================
  File:      11-0_minilab-intro.html
  Project:   Understanding Infection Dynamics · Infektionsdynamiken verstehen
  Type:      Open Educational Resource (OER)
  Authors:   B. D. Rausch · A. Heinz
  Contact:   info@infectiondynamics.eu · info@infektionsdynamiken.de
  License:   CC BY 4.0

  Created:   2025-09-25
  Updated:   2025-09-25
  Version:   3.0.0
  Changelog: - v3.0.0 OER-Header vereinheitlicht, Demo ohne Boot, Runner-Import auf Architekturpfad
  ============================================================================
-->

<html lang="de" data-mode="school" data-page="repo" data-coach="ben">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Infektionsdynamiken – Repository · Minilab-Intro Demo</title>

    <!-- Favicons (für Demo deaktiviert; aktivieren, wenn Dateien vorhanden sind) -->
    <!-- <link rel="icon" href="../assets/icons/favicon.ico" sizes="any" /> -->
    <!-- <link rel="icon" type="image/png" sizes="32x32" href="../assets/icons/favicon-32.png" /> -->
    <!-- <link rel="icon" type="image/png" sizes="192x192" href="../assets/icons/favicon-192.png" /> -->

    <!-- Core Styles (eine Ebene über /Z repo/0_demo/) -->
    <link rel="stylesheet" href="../css/tokens.css" />
    <link rel="stylesheet" href="../css/base.css" />
    <link rel="stylesheet" href="../css/layout.css" />
    <link rel="stylesheet" href="../css/components.css" />
    <link rel="stylesheet" href="../css/patterns.css" />
    <link rel="stylesheet" href="../css/pages.css" />
    <link rel="stylesheet" href="../css/landing.css" />

    <style>
      /* Header: Navigation bei kleinen Viewports einkürzen */
      @media (max-width: 1000px) { .landing-header .nav-links { display: none; } }
      .wordmark-short { display: none; }
      @media (max-width: 680px) { .wordmark-long { display: none; } .wordmark-short { display: block; } }
      @media (max-width: 499.98px) { .wordmark-long, .wordmark-short { display: none; } }

      /* Demo-Stage innerhalb der Card */
      .demo-stage { display: grid; gap: 16px; }
      .chart-wrap { border-radius: 12px; border: 1px solid var(--border, #e5e7eb); background: var(--panel, #fff); overflow: hidden; min-height: 360px; }
      .chart-wrap canvas { display: block; width: 100%; height: 420px; }

      .deck { display: grid; gap: 14px; margin-top: 12px; }
      .deck-comp { grid-template-columns: repeat(3, minmax(0, 1fr)); }
      .deck-context { grid-template-columns: repeat(3, minmax(0, 1fr)); }
      @media (max-width: 820px) {
        .deck-comp { grid-template-columns: 1fr; }
        .deck-context { grid-template-columns: 1fr; }
      }

      .kpi-pill {
        border-radius: 16px;
        border: 1px solid var(--shadow, #e5e7eb);
        background: var(--bg, #fff);
        padding: 12px 14px;
        box-shadow: var(--shadow-sm, 0 1px 2px rgba(0,0,0,.04));
      }
      .kpi-pill strong { display: block; font-weight: 600; margin-bottom: 6px; }
      .kpi-pill .val { font-size: 1.1rem; line-height: 1.2; }
      .kpi-pill.s { border-left: 4px solid var(--c-s, #22c55e); }
      .kpi-pill.i { border-left: 4px solid var(--c-i, #ef4444); }
      .kpi-pill.r { border-left: 4px solid var(--c-r, #3b82f6); }
    </style>
  </head>

<body id="top" class="repo">
    <!-- Header (ohne Bildlogo, um 404 zu vermeiden) -->
    <header class="landing-header" role="banner">
      <div class="container bar">
        <a href="../index.html" class="brand" aria-label="Infektionsdynamiken.de — Startseite">
          <div class="wordmark wordmark-long">
            <div class="brand-title">Infektionsdynamiken verstehen</div>
            <div class="brand-claim">Repository · transparent &amp; zugänglich</div>
          </div>
          <div class="wordmark wordmark-short">
            <div class="brand-title">Infektionsdynamiken.de</div>
            <div class="brand-claim">Repository</div>
          </div>
        </a>
        <nav class="landing-nav" aria-label="Hauptnavigation Repository">
          <div class="nav-links">
            <a href="../architektur.html">Architektur</a>
            <a href="../publikationen.html">Publikationen</a>
            <a href="../lehre.html">Lehre</a>
            <a href="https://infektionsdynamiken.de/#legal">Rechtliches</a>
          </div>
        </nav>
      </div>
    </header>

  <main>
    <section class="section container">
      <!-- Alles in EINER .card.pad (runder Look) -->
      <article class="card pad">
        <span class="eyebrow">DEMO</span>
        <hr class="accent-line" />
        <h1>Minilab 1 Intro (SIR)</h1>
        <p class="lead">Sequenzielle SIR-Intro-Simulation ohne Boot-Modul. Start über den Button Wiederholen.</p>

        <div class="demo-stage">
          <!-- Controls in der Card -->
          <div class="coach-row" style="gap: 12px;">
            <button id="chip-intro-coach" class="hint-chip is-video" type="button" aria-disabled="true" title="Coach-Overlay ist in dieser Demo deaktiviert">
              <span class="hc-ava"><span class="hc-badge" aria-hidden="true"></span></span>
              <span class="hc-label">Coach-Kommentar</span>
            </button>

            <button id="btn-replay" class="btn" type="button" title="Intro-Sequenz neu starten">Wiederholen</button>
          </div>

          <!-- Chart + KPI-Decks in der Card -->
          <div class="chart-wrap">
            <canvas id="intro-canvas" aria-label="Intro-Chart"></canvas>
          </div>

          <div class="deck deck-comp" id="kpis-comp" aria-label="Kompartimente"><!-- injected --></div>
          <div class="deck deck-context" id="kpis-context" aria-label="Kontext-KPIs"><!-- injected --></div>
        </div>
      </article>
    </section>
  </main>

  <footer class="landing-footer">
    <div class="container">
        <p class="muted">© CC BY 4.0 · Infektionsdynamiken – Repository (Preview). Keine Cookies.</p>
      </div>
    </footer>

    <!-- Runner direkt mounten (ohne Boot) -->
<script type="module">
      import { mountIntroSIR } from "../1_architecture/1-1 UID-I (Minilab Intro)/11-2 Runner/11-21_sir-runner/intro-sir.js";

      // KPI-Renderer
      const $comp = document.getElementById("kpis-comp");
      const $ctx  = document.getElementById("kpis-context");

      const fmtPct = v => (typeof v === "number" ? v.toFixed(1) + " %" : "—");
      const fmtNum = v => (typeof v === "number" ? v.toFixed(2) : "—");

      function renderKPIs(p) {
        $comp.innerHTML = `
          <div class="kpi-pill s">
            <strong>Empfängliche (S)</strong>
            <div class="val">${fmtPct(p.sRel)}</div>
          </div>
          <div class="kpi-pill i">
            <strong>Erkrankte (I)</strong>
            <div class="val">${fmtPct(p.iRel)}</div>
          </div>
          <div class="kpi-pill r">
            <strong>Genesene (R)</strong>
            <div class="val">${fmtPct(p.rRel)}</div>
          </div>
        `;
        $ctx.innerHTML = `
          <div class="kpi-pill">
            <strong>t&nbsp;(Tag)</strong>
            <div class="val">${p.t ?? "—"}</div>
          </div>
          <div class="kpi-pill">
            <strong>R-Wert&nbsp;(effektiv)</strong>
            <div class="val">${fmtNum(p.reff)}</div>
          </div>
          <div class="kpi-pill">
            <strong>R-Wert&nbsp;(Basis)</strong>
            <div class="val">${fmtNum(p.r0)}</div>
          </div>
        `;
      }

      // Runner mounten
      const controller = mountIntroSIR({
        canvas: document.getElementById("intro-canvas"),
        onUpdate: renderKPIs
      });

      // Controls verdrahten
      document.getElementById("btn-replay").addEventListener("click", () => controller.play());

      // Auto-Start
      controller.play();
    </script>
</body>
</html>
